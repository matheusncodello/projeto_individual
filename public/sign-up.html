<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Changa&display=swap&subset=arabic,latin-ext" rel="stylesheet">
  <link rel="icon" type="imagem/png" href="assets/img/csgo-icon.png" />
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/form-style.css">
  <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
  <script data-jsd-embedded data-key="94edbcc9-0662-4228-8d73-cc543fcd359f"
    data-base-url="https://jsd-widget.atlassian.com" src="https://jsd-widget.atlassian.com/assets/embed.js"></script>
  <title>Registro | CS:GO</title>
</head>

<body>
  <!-- Cabeçalho -->
  <div class="header">
    <div class="header-vertical">
      <!-- <h2>CS:GO Tracker</h2> -->
      <img src="assets/img/logo.png" class="csgo-logo">
      <ul>
        <li><a href="index.html"><i class="fas fa-home"></i>Home</a></li>
        <li><a href="mapas.html"><i class="fas fa-globe"></i>Mapas</a></li>
        <li><a href="armas.html"><i class="fas fa-tag"></i>Armas</a></li>
        <li><a href="sign-in.html"><i class="fas fa-sign-in-alt"></i>Login / Registro</a></li>
      </ul>
      <div class="icone-social">
        <a href="https://github.com/matheusncodello"><i class="fab fa-github"></i></a>
        <a href="https://www.linkedin.com/in/matheus-noschese-codello/"><i class="fab fa-linkedin-in"></i></a>
      </div>
    </div>
  </div>
  <!-- Conteúdo do site -->
  <div class="content">
    <form id="form" method="post" onsubmit="return cadastrar()">
      <h1>Registro</h1>
      <div class="row">
        <label>Nome in-game</label>
        <input autocomplete="off" type="text" name="nomeInGame" autofocus="autofocus" required minlength="">
      </div>
      <div class="row">
        <label>Email</label>
        <input autocomplete="off" type="email" name="email" required minlength="">
      </div>
      <div class="row">
        <label>Usuário</label>
        <input autocomplete="off" type="text" name="usuario" name="login" required minlength="8">
      </div>
      <div class="row">
        <label>Senha</label>
        <input autocomplete="off" type="password" name="senha" name="senha" required minlength="8">
      </div>
      <button type="submit" id="btn_cadastrar" value="Cadastrar" class="btn">Registrar</button>
      <p>Já tem conta? <a href="sign-in.html">Entre aqui</a></p>
    </form>
  </div>
</body>

</html>

<script>

  function cadastrar() {
    var formulario = new URLSearchParams(new FormData(form));
    fetch("/usuarios/cadastrar", {
      method: "POST",
      body: formulario
    }).then(function (response) {

      if (response.ok) {

        window.location.href = 'sign-in.html';

      } else {

        console.log('Erro de cadastro!');
        response.text().then(function (resposta) {
          div_erro.innerHTML = resposta;
        });
      }
    });
    return false;
  }

</script>